name: preview test

on:
  workflow_dispatch:

jobs:
  test-commit:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Set Date
      run: echo "action_date=$(date +'%Y-%m-%d-%H%M')" >> Preview/test.txt

    - name: Configure Git
      run: |
        git checkout -b "preview" "origin/preview"
        git config user.name "${{ github.actor }}"
        git config user.email "${{ github.actor }}@users.noreply.github.com"
        
    - name: Push
      uses: s0/git-publish-subdir-action@develop
      env:
        REPO: self
        BRANCH: preview # The branch name where you want to push the assets
        FOLDER: Preview # The directory where your assets are generated
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} # GitHub will automatically add this - you don't need to bother getting a token
        MESSAGE: "Build: ({sha}) {msg}" # The commit message
